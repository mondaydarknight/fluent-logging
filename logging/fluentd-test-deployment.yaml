# apiVersion: v1
# kind: Pod
# metadata:
#   name: counter
#   namespace: logging
# spec:
#   containers:
#   - name: count
#     image: busybox
#     args:
#     - /bin/sh
#     - -c
#     - >
#       i=0;
#       while true;
#       do
#         echo "$i: $(date)" >> /var/log/1.log;
#         echo "$(date) INFO $i" >> /var/log/2.log;
#         i=$((i+1));
#         sleep 1;
#       done
#     volumeMounts:
#     - name: varlog
#       mountPath: /var/log
#   - name: count-agent
#     image: fluent/fluentd:v1.14-debian-1
#     command: ["fluentd", "-c", "/fluentd/etc/fluentd.conf"]
#     # env:
#     # - name: FLUENTD_ARGS
#     #   value: -c /fluentd/etc/fluentd.conf
#     volumeMounts:
#     - name: varlog
#       mountPath: /var/log
#     - name: config-volume
#       mountPath: /fluentd/etc
#   volumes:
#   - name: varlog
#     emptyDir: {}
#   - name: config-volume
#     configMap:
#       name: fluentd-config
# ---
# apiVersion: v1
# kind: ConfigMap
# metadata:
#   name: fluentd-config
#   namespace: logging
# data:
#   fluentd.conf: |
#     <system>
#       log_level debug
#     </system>

#     <source>
#       @type tail
#       path /var/log/1.log
#       pos_file /var/log/1.log.pos
#       tag count.format1
#       <parse>
#         @type none
#       </parse>
#     </source>

#     <source>
#       @type tail
#       path /var/log/2.log
#       pos_file /var/log/2.log.pos
#       tag count.format2
#       <parse>
#         @type none
#       </parse>
#     </source>

#     <label @FLUENT_LOG>
#       <match **>
#         @type stdout
#       </match>
#     </label>
